TIMER	EQU	10H
PIC		EQU	20H
EOI		EQU	20H
NCLK	EQU	10

		ORG	40
IPCLK	DW	RUTCLK

		ORG	1000H
DIEZ	DB	3H
MIN		DB	30H
		DB	30H
SEG		DB	30H
		DB	30H
FIN		DB	?

		ORG	3000H
RUTCLK:	PUSH	AX
		INC	SEG+1
		CMP	SEG,3AH
		JNZ	RESET
		MOV	SEG+1,30H
		INC	SEG
		CMP	SEG,36H
		JNZ RESET
		MOV	SEG,30H
		INC	MIN+1
		CMP	MIN+1,3AH
		JNZ	RESET
		MOV	MIN+1,30H
		INC MIN
		CMP	MIN,36H
		JNZ RESET
		MOV	MIN,30H
RESET:	DEC	DIEZ
		JNZ	SAL
		INT 7
		MOV	DIEZ,3H
SAL:	MOV	AL,0
		OUT	TIMER,AL
		MOV	AL,EOI
		OUT	PIC,AL
		POP AX
		IRET

		ORG	2000H
		CLI
		MOV	AL,0FDH
		OUT	PIC+1,AL
		MOV AL,NCLK
		OUT	PIC+5,AL
		MOV	AL,1
		OUT	TIMER+1,AL
		MOV	AL,0
		OUT	TIMER,AL
		MOV	BX,OFFSET MIN
		MOV	AL,OFFSET FIN - OFFSET MIN
		STI
BUCLE:	JMP	BUCLE
		
		END
 